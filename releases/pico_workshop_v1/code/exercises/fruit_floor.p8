pico-8 cartridge // http://www.pico-8.com
version 22
__lua__
basket_sprite=1
player_sprite=2
fruit_sprite=3

player_x=64
player_y=100

fruits={}
fruit_interval=16
fruit_count=4

gravity=1
points=0

function _init()
	 for i=1,fruit_count do
	   fruit={
	     sprite=fruit_sprite,
	     x=flr(rnd(120)),
	     y=-fruit_interval*i
	   }
	   add(fruits,fruit)
	 end
end

function _update()
  if btn(0) and player_x >= 2 then
      player_x-=2
  end

  if btn(1) and player_x <= (128-8-2) then
      player_x+=2
  end

  for fruit in all(fruits) do
    fruit.y += gravity

    if fruit.y+4>=player_y-8 and
       fruit.y+4<=player_y and
       fruit.x+4>=player_x and
       fruit.x+4<=player_x+8 then
      points+=1
      del(fruits,fruit)
    end

    -- floor delete
  end
end

function _draw()
  cls(12)
  rectfill(0,108,127,127,3)
  spr(player_sprite,player_x,player_y)
  spr(basket_sprite,player_x,player_y-8)

  for fruit in all(fruits) do
    spr(fruit.sprite, fruit.x, fruit.y)
  end

  print("score="..points)
end


__gfx__
0000000080000008e000000e00033300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000080000008e00ee00e00033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070080000008e00ee00e00aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700080000008eeeeeeee0a9aaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770008000000800eeee000aaaa9a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007008000000800e00e000aaaaaa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000008888888800e00e0000a9aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888880ee00ee0000aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
